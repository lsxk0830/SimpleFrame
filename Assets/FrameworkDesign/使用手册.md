# 分模块

所有模块都需要继承接口 IArchitectureModule

```C#
public class MathModelue : IArchitectureModule
{
    public void OnInit()
    {
        this.RegisterModel<IMathModel>(new MathModel());
    }
}

public class DemoArchitecture : AbstractArchitecture<DemoArchitecture>
{
    protected override void OnInit()
    {
        // ModelRegister();
        // ServiceRegister();
        // UtilityRegister();
        this.RegisterModel<IMathModel>(new MathModel());
    }
}
```



# view

所有挂载在游戏物体的脚本都需要实现IController接口
示例：

```
public class AbstractController : MonoBehaviour,IController
{

}
public class GameController : AbstractController
{
    private void Start()
    {
    	
    }
}
```



# 命令

所有命令Command都需要继承ICommand接口
示例：

```
public class SubCommand : ICommand
{
    private IMathModel subModel;
    public void OnExcute()
    {
        // TODO:触发事件、调用方法
        subModel = this.GetModel<IMathModel>();
        subModel.Add();
    }
}
```



# Model、Service

Model层需要继承IModel接口；Service层需要继承IService接口；
示例;

```
public interface IMathModel : IModel
{
    int Count { get; }
}

public class MathModel : IMathModel
{
    public int Count { get; private set; }

    public void OnInit()
    {
        Count = 10;
    }

}
```



# BindableProperty

示例：

```
public interface ICollectionService : IService
{
    public BindableProperty<int> CollectUserCount { get; }
}

public class CollectionService : ICollectionService
{
    public BindableProperty<int> CollectOnlineCount { get; private set; } = new BindableProperty<int> { Value = 0 };
    public void OnInit()
    {
    
    }
}
public class Test : AbstractController
{
    private void Start()
    {
        this.GetService<ICollectionService>().CollectUserCount.Subscribe(newCount=>
        {
        
        });
        this.GetService<ICollectionService>().CollectUserCount.UnSubscribe(newCount=>
        {
        
        });
    }
}
```



# Event

事件需要继承IEvent接口
示例:

```
public class/Struct CollectionEvent : IEvent // 定义事件类
{

}
public class TestCommand : ICommand // 命令触发事件
{
    TestEvent TestEvent = new TestEvent();
    public void OnExcute()
    {
        this.TriggerEvent(TestEvent);
    }
}

public class TestService : ITestService
{
    public void OnInit()
    {
        // 监听事件
        this.SubscribeEvent<CollectionEvent>(e=>
        {

    	});
	}
}

public class Test : AbstractController
{
    private void Start()
    {
        // 监听事件
        this.SubscribeEvent<CollectionEvent>(e=>
        {

        });
        this.SubscribeEvent<CollectionEvent>(e=>
        {
    
        }).UnSubScribeWhenGameObjectDestroyed(gameObject);
    }

}
```


